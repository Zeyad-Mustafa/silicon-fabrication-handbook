<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  
  <!-- Title -->
  <text x="700" y="35" text-anchor="middle" font-size="28" font-weight="bold" fill="#1a1a1a">
    CMOS Inverter Layout &amp; Stick Diagram
  </text>
  <text x="700" y="60" text-anchor="middle" font-size="14" fill="#666">
    Top View with Mask Layers • Cross-Section • Schematic
  </text>
  
  <!-- Layout View (Top) -->
  <g id="layout">
    <rect x="50" y="90" width="550" height="480" fill="#f5f5f5" stroke="#333" stroke-width="3" rx="8"/>
    <text x="325" y="120" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">
      Physical Layout (Top View)
    </text>
    
    <!-- n-well (orange background) -->
    <rect x="100" y="150" width="450" height="180" fill="#ffcc80" stroke="#ff6f00" stroke-width="3" stroke-dasharray="8,4"/>
    <text x="110" y="170" font-size="12" fill="#f57c00" font-weight="bold">n-well</text>
    
    <!-- Active areas -->
    <!-- pMOS active (top) -->
    <rect x="140" y="180" width="370" height="120" fill="#e1f5fe" stroke="#0288d1" stroke-width="2"/>
    <text x="150" y="200" font-size="10" fill="#0288d1" font-weight="bold">Active (p⁺)</text>
    
    <!-- nMOS active (bottom) -->
    <rect x="140" y="380" width="370" height="120" fill="#e1f5fe" stroke="#0288d1" stroke-width="2"/>
    <text x="150" y="400" font-size="10" fill="#0288d1" font-weight="bold">Active (n⁺)</text>
    
    <!-- Poly gates (vertical strips) -->
    <rect x="250" y="160" width="60" height="360" fill="#b0bec5" fill-opacity="0.7" stroke="#546e7a" stroke-width="3"/>
    <text x="280" y="540" text-anchor="middle" font-size="11" fill="#333" font-weight="bold">Poly</text>
    
    <!-- Metal 1 connections -->
    <!-- VDD (top) -->
    <rect x="120" y="145" width="410" height="25" fill="#ffd54f" stroke="#f57f17" stroke-width="2"/>
    <text x="325" y="162" text-anchor="middle" font-size="12" fill="#333" font-weight="bold">VDD (M1)</text>
    
    <!-- Output (middle) -->
    <rect x="340" y="310" width="25" height="100" fill="#ffd54f" stroke="#f57f17" stroke-width="2"/>
    <line x1="365" y1="360" x2="430" y2="360" stroke="#ffd54f" stroke-width="8"/>
    <text x="445" y="365" font-size="12" fill="#333" font-weight="bold">Vout</text>
    
    <!-- GND (bottom) -->
    <rect x="120" y="510" width="410" height="25" fill="#ffd54f" stroke="#f57f17" stroke-width="2"/>
    <text x="325" y="527" text-anchor="middle" font-size="12" fill="#333" font-weight="bold">GND (M1)</text>
    
    <!-- Input connection -->
    <line x1="90" y1="340" x2="250" y2="340" stroke="#ffd54f" stroke-width="8"/>
    <text x="70" y="345" text-anchor="end" font-size="12" fill="#333" font-weight="bold">Vin</text>
    
    <!-- Contacts (small squares) -->
    <!-- pMOS S/D contacts -->
    <rect x="160" y="160" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    <rect x="335" y="160" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    <rect x="160" y="275" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    <rect x="335" y="275" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    
    <!-- nMOS S/D contacts -->
    <rect x="160" y="390" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    <rect x="335" y="390" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    <rect x="160" y="475" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    <rect x="335" y="475" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    
    <!-- Poly contacts -->
    <rect x="270" y="160" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
    
    <!-- Dimension annotations -->
    <line x1="140" y1="555" x2="510" y2="555" stroke="#c62828" stroke-width="2"/>
    <line x1="140" y1="550" x2="140" y2="560" stroke="#c62828" stroke-width="2"/>
    <line x1="510" y1="550" x2="510" y2="560" stroke="#c62828" stroke-width="2"/>
    <text x="325" y="548" text-anchor="middle" font-size="10" fill="#c62828" font-weight="bold">W_total</text>
    
    <line x1="560" y1="180" x2="560" y2="300" stroke="#c62828" stroke-width="2"/>
    <line x1="555" y1="180" x2="565" y2="180" stroke="#c62828" stroke-width="2"/>
    <line x1="555" y1="300" x2="565" y2="300" stroke="#c62828" stroke-width="2"/>
    <text x="575" y="245" font-size="10" fill="#c62828" font-weight="bold">W_p</text>
  </g>
  
  <!-- Stick Diagram -->
  <g id="stick">
    <rect x="650" y="90" width="350" height="280" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="3" rx="8"/>
    <text x="825" y="120" text-anchor="middle" font-size="18" font-weight="bold" fill="#7b1fa2">
      Stick Diagram
    </text>
    
    <!-- VDD -->
    <line x1="680" y1="150" x2="970" y2="150" stroke="#ff5252" stroke-width="8"/>
    <text x="985" y="155" font-size="11" fill="#ff5252" font-weight="bold">VDD</text>
    
    <!-- pMOS -->
    <line x1="750" y1="150" x2="750" y2="200" stroke="#0288d1" stroke-width="6"/>
    <line x1="900" y1="150" x2="900" y2="200" stroke="#0288d1" stroke-width="6"/>
    <rect x="730" y="190" width="40" height="20" fill="none" stroke="#7b1fa2" stroke-width="3" rx="3"/>
    <text x="750" y="204" text-anchor="middle" font-size="9" fill="#7b1fa2" font-weight="bold">pMOS</text>
    
    <!-- Poly (gate) -->
    <line x1="750" y1="200" x2="750" y2="290" stroke="#546e7a" stroke-width="8"/>
    <text x="760" y="250" font-size="10" fill="#546e7a" font-weight="bold">Poly</text>
    
    <!-- Output -->
    <line x1="900" y1="200" x2="900" y2="290" stroke="#ffd54f" stroke-width="6"/>
    <circle cx="900" cy="245" r="5" fill="#ffd54f" stroke="#f57f17" stroke-width="2"/>
    <line x1="900" y1="245" x2="940" y2="245" stroke="#ffd54f" stroke-width="6"/>
    <text x="955" y="250" font-size="11" fill="#333" font-weight="bold">Vout</text>
    
    <!-- nMOS -->
    <rect x="730" y="280" width="40" height="20" fill="none" stroke="#1976d2" stroke-width="3" rx="3"/>
    <text x="750" y="294" text-anchor="middle" font-size="9" fill="#1976d2" font-weight="bold">nMOS</text>
    
    <!-- GND -->
    <line x1="680" y1="330" x2="970" y2="330" stroke="#424242" stroke-width="8"/>
    <text x="985" y="335" font-size="11" fill="#424242" font-weight="bold">GND</text>
    
    <line x1="750" y1="300" x2="750" y2="330" stroke="#0288d1" stroke-width="6"/>
    <line x1="900" y1="300" x2="900" y2="330" stroke="#0288d1" stroke-width="6"/>
    
    <!-- Input -->
    <line x1="680" y1="245" x2="750" y2="245" stroke="#546e7a" stroke-width="6"/>
    <text x="665" y="250" text-anchor="end" font-size="11" fill="#333" font-weight="bold">Vin</text>
  </g>
  
  <!-- Cross-Section -->
  <g id="cross_section">
    <rect x="650" y="390" width="700" height="180" fill="#e8eaf6" stroke="#3f51b5" stroke-width="3" rx="8"/>
    <text x="1000" y="420" text-anchor="middle" font-size="18" font-weight="bold" fill="#3f51b5">
      Cross-Section A-A'
    </text>
    
    <!-- pMOS side -->
    <rect x="720" y="445" width="80" height="20" fill="#b0bec5" stroke="#546e7a" stroke-width="2"/>
    <text x="760" y="459" text-anchor="middle" font-size="9" fill="white" font-weight="bold">Poly Gate</text>
    <rect x="720" y="465" width="80" height="30" fill="#c5a876" stroke="#8b7355" stroke-width="2"/>
    <rect x="720" y="495" width="80" height="30" fill="#ffcc80" stroke="#ff6f00" stroke-width="2"/>
    <text x="760" y="513" text-anchor="middle" font-size="9" fill="#333" font-weight="bold">n-well</text>
    <rect x="685" y="445" width="35" height="20" fill="#9c27b0" stroke="#6a1b9a" stroke-width="2"/>
    <text x="702" y="459" text-anchor="middle" font-size="8" fill="white">p⁺</text>
    <rect x="800" y="445" width="35" height="20" fill="#9c27b0" stroke="#6a1b9a" stroke-width="2"/>
    <text x="817" y="459" text-anchor="middle" font-size="8" fill="white">p⁺</text>
    
    <!-- nMOS side -->
    <rect x="1050" y="445" width="80" height="20" fill="#b0bec5" stroke="#546e7a" stroke-width="2"/>
    <text x="1090" y="459" text-anchor="middle" font-size="9" fill="white" font-weight="bold">Poly Gate</text>
    <rect x="1050" y="465" width="80" height="30" fill="#c5a876" stroke="#8b7355" stroke-width="2"/>
    <rect x="1050" y="495" width="80" height="30" fill="#a5d6a7" stroke="#66bb6a" stroke-width="2"/>
    <text x="1090" y="513" text-anchor="middle" font-size="9" fill="#333" font-weight="bold">p-well</text>
    <rect x="1015" y="445" width="35" height="20" fill="#ff5252" stroke="#c62828" stroke-width="2"/>
    <text x="1032" y="459" text-anchor="middle" font-size="8" fill="white">n⁺</text>
    <rect x="1130" y="445" width="35" height="20" fill="#ff5252" stroke="#c62828" stroke-width="2"/>
    <text x="1147" y="459" text-anchor="middle" font-size="8" fill="white">n⁺</text>
    
    <!-- Substrate -->
    <rect x="685" y="525" width="480" height="30" fill="#8b7355" stroke="#5d4037" stroke-width="2"/>
    <text x="925" y="543" text-anchor="middle" font-size="10" fill="white" font-weight="bold">p-type Substrate</text>
    
    <!-- Labels -->
    <text x="760" y="435" text-anchor="middle" font-size="11" fill="#f57c00" font-weight="bold">pMOS</text>
    <text x="1090" y="435" text-anchor="middle" font-size="11" fill="#1976d2" font-weight="bold">nMOS</text>
  </g>
  
  <!-- Schematic -->
  <g id="schematic">
    <rect x="1050" y="90" width="300" height="280" fill="#fff9c4" stroke="#f9a825" stroke-width="3" rx="8"/>
    <text x="1200" y="120" text-anchor="middle" font-size="18" font-weight="bold" fill="#f57c00">
      Schematic
    </text>
    
    <!-- VDD line -->
    <line x1="1200" y1="150" x2="1200" y2="170" stroke="#333" stroke-width="2"/>
    <text x="1180" y="165" text-anchor="end" font-size="11" fill="#333" font-weight="bold">VDD</text>
    
    <!-- pMOS -->
    <circle cx="1200" cy="190" r="3" fill="#333"/>
    <line x1="1200" y1="170" x2="1200" y2="187" stroke="#333" stroke-width="2"/>
    <line x1="1190" y1="190" x2="1210" y2="190" stroke="#333" stroke-width="3"/>
    <line x1="1190" y1="210" x2="1210" y2="210" stroke="#333" stroke-width="3"/>
    <circle cx="1185" cy="200" r="4" fill="none" stroke="#333" stroke-width="2"/>
    <line x1="1200" y1="210" x2="1200" y2="227" stroke="#333" stroke-width="2"/>
    
    <!-- Output node -->
    <circle cx="1200" cy="230" r="4" fill="#333"/>
    <line x1="1200" y1="230" x2="1250" y2="230" stroke="#333" stroke-width="2"/>
    <text x="1265" y="235" font-size="11" fill="#333" font-weight="bold">Vout</text>
    
    <!-- nMOS -->
    <line x1="1200" y1="230" x2="1200" y2="253" stroke="#333" stroke-width="2"/>
    <line x1="1190" y1="250" x2="1210" y2="250" stroke="#333" stroke-width="3"/>
    <line x1="1190" y1="270" x2="1210" y2="270" stroke="#333" stroke-width="3"/>
    <line x1="1200" y1="270" x2="1200" y2="290" stroke="#333" stroke-width="2"/>
    
    <!-- GND -->
    <line x1="1190" y1="290" x2="1210" y2="290" stroke="#333" stroke-width="3"/>
    <line x1="1193" y1="293" x2="1207" y2="293" stroke="#333" stroke-width="2"/>
    <line x1="1196" y1="296" x2="1204" y2="296" stroke="#333" stroke-width="1"/>
    <text x="1220" y="295" font-size="11" fill="#333" font-weight="bold">GND</text>
    
    <!-- Input -->
    <line x1="1130" y1="200" x2="1185" y2="200" stroke="#333" stroke-width="2"/>
    <line x1="1160" y1="200" x2="1160" y2="260" stroke="#333" stroke-width="2"/>
    <line x1="1160" y1="260" x2="1190" y2="260" stroke="#333" stroke-width="2"/>
    <text x="1115" y="205" text-anchor="end" font-size="11" fill="#333" font-weight="bold">Vin</text>
    
    <!-- Device labels -->
    <text x="1230" y="195" font-size="10" fill="#7b1fa2">Mp</text>
    <text x="1230" y="265" font-size="10" fill="#1976d2">Mn</text>
    
    <!-- Sizing info -->
    <text x="1080" y="320" font-size="9" fill="#666">W_p/L_p = 2W/L</text>
    <text x="1080" y="335" font-size="9" fill="#666">W_n/L_n = W/L</text>
    <text x="1080" y="350" font-size="9" fill="#666">β_p = β_n (matched)</text>
  </g>
  
  <!-- Legend -->
  <rect x="50" y="590" width="550" height="140" fill="#fafafa" stroke="#333" stroke-width="2" rx="6"/>
  <text x="70" y="615" font-size="14" font-weight="bold" fill="#333">Layout Layer Legend:</text>
  
  <rect x="70" y="630" width="30" height="15" fill="#ffcc80" stroke="#ff6f00" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="105" y="642" font-size="10" fill="#333">n-well (dashed)</text>
  
  <rect x="220" y="630" width="30" height="15" fill="#e1f5fe" stroke="#0288d1" stroke-width="2"/>
  <text x="255" y="642" font-size="10" fill="#333">Active (diffusion)</text>
  
  <rect x="380" y="630" width="30" height="15" fill="#b0bec5" stroke="#546e7a" stroke-width="2"/>
  <text x="415" y="642" font-size="10" fill="#333">Polysilicon</text>
  
  <rect x="70" y="660" width="30" height="15" fill="#ffd54f" stroke="#f57f17" stroke-width="2"/>
  <text x="105" y="672" font-size="10" fill="#333">Metal 1</text>
  
  <rect x="220" y="660" width="15" height="15" fill="#c0c0c0" stroke="#757575" stroke-width="1"/>
  <text x="240" y="672" font-size="10" fill="#333">Contact</text>
  
  <rect x="350" y="660" width="15" height="15" fill="#ff5252" stroke="#c62828" stroke-width="2"/>
  <text x="370" y="672" font-size="10" fill="#333">n⁺ implant</text>
  
  <rect x="470" y="660" width="15" height="15" fill="#9c27b0" stroke="#6a1b9a" stroke-width="2"/>
  <text x="490" y="672" font-size="10" fill="#333">p⁺ implant</text>
  
  <text x="70" y="700" font-size="11" fill="#666" font-weight="bold">Design Rules (typical 180nm process):</text>
  <text x="70" y="715" font-size="9" fill="#666">• Minimum width: Active=0.6µm, Poly=0.35µm, Metal=0.5µm • Spacing: Active=0.9µm, Poly=0.4µm</text>
  
  <!-- Performance Table -->
  <rect x="650" y="590" width="700" height="140" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="6"/>
  <text x="670" y="615" font-size="14" font-weight="bold" fill="#388e3c">CMOS Inverter Characteristics:</text>
  
  <text x="670" y="640" font-size="11" fill="#333" font-weight="bold">Voltage Transfer:</text>
  <text x="670" y="657" font-size="10" fill="#666">• V_IL ≈ 0.3V_DD, V_IH ≈ 0.7V_DD</text>
  <text x="670" y="672" font-size="10" fill="#666">• V_M (switching threshold) = V_DD/2 (for matched β)</text>
  <text x="670" y="687" font-size="10" fill="#666">• Noise margins: NM_L = NM_H ≈ 0.4V_DD</text>
  
  <text x="670" y="710" font-size="11" fill="#333" font-weight="bold">Timing:</text>
  <text x="670" y="727" font-size="10" fill="#666">• Propagation delay: t_p = (t_pLH + t_pHL)/2 ≈ 100ps (28nm), 1ns (180nm)</text>
  
  <!-- Key Parameters -->
  <rect x="50" y="750" width="1300" height="130" fill="#e1f5fe" stroke="#0288d1" stroke-width="2" rx="6"/>
  <text x="700" y="780" text-anchor="middle" font-size="16" font-weight="bold" fill="#0288d1">
    Key Design Parameters &amp; Trade-offs
  </text>
  
  <text x="70" y="805" font-size="11" fill="#333" font-weight="bold">Sizing Ratio (W_p/W_n):</text>
  <text x="70" y="822" font-size="10" fill="#666">• Typical: 2:1 to 3:1 (compensates for μ_p ≈ μ_n/2)</text>
  <text x="70" y="837" font-size="10" fill="#666">• Equal rise/fall times for symmetric switching</text>
  <text x="70" y="852" font-size="10" fill="#666">• Larger ratio → faster pull-up, but more area</text>
  
  <text x="520" y="805" font-size="11" fill="#333" font-weight="bold">Power Consumption:</text>
  <text x="520" y="822" font-size="10" fill="#666">• Static: P_static ≈ 0 (no DC path)</text>
  <text x="520" y="837" font-size="10" fill="#666">• Dynamic: P_dyn = α·C_L·V_DD²·f</text>
  <text x="520" y="852" font-size="10" fill="#666">• Short-circuit: P_sc during transitions</text>
  
  <text x="950" y="805" font-size="11" fill="#333" font-weight="bold">Area vs Performance:</text>
  <text x="950" y="822" font-size="10" fill="#666">• Larger W → faster, more drive, more power</text>
  <text x="950" y="837" font-size="10" fill="#666">• Larger L → slower, less leakage</text>
  <text x="950" y="852" font-size="10" fill="#666">• Minimum area: ~50 λ² (λ = feature size/2)</text>
  
</svg>